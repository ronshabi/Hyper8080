cmake_minimum_required(VERSION 3.1)
project(8080_Emu C)

set(CMAKE_C_STANDARD 11)
#set(CMAKE_C_FLAGS "-O3")
find_package(SDL2 REQUIRED)
include_directories(${SDL2_INCLUDE_DIRS})

add_executable(8080_Emu src/main.c src/cpu.c src/cpu.h src/instructions.c src/instructions.h src/debug.c src/debug.h src/render.c src/render.h src/sys.c src/sys.h src/defs.h)
target_link_libraries(8080_Emu ${SDL2_LIBRARIES})
target_link_libraries(8080_Emu m)

# Testing
enable_testing()
add_executable(test_stack tests/test_stack.c)
add_executable(test_stack_overflowing tests/test_stack_overflowing.c)
add_executable(test_cpu_basic_memory tests/test_cpu_basic_memory.c)
add_executable(test_instructions tests/test_instructions.c)

# Generated by the create_new_test.py script

add_executable(test_adi tests/test_adi.c)
add_test(Test-adi test_adi)
add_executable(test_sui tests/test_sui.c)
add_test(Test-sui test_sui)
add_executable(test_sbi tests/test_sbi.c)
add_test(Test-sbi test_sbi)
add_executable(test_ani tests/test_ani.c)
add_test(Test-ani test_ani)
add_executable(test_sta tests/test_sta.c)
add_test(Test-sta test_sta)
add_executable(test_lda tests/test_lda.c)
add_test(Test-lda test_lda)
add_executable(test_shld tests/test_shld.c)
add_test(Test-shld test_shld)
add_executable(test_ana tests/test_ana.c)
add_test(Test-ana test_ana)
add_executable(test_dad tests/test_dad.c)
add_test(Test-dad test_dad)
add_executable(test_inx tests/test_inx.c)
add_test(Test-inx test_inx)
add_executable(test_dcx tests/test_dcx.c)
add_test(Test-dcx test_dcx)
add_executable(test_xchg tests/test_xchg.c)
add_test(Test-xchg test_xchg)
add_executable(test_xthl tests/test_xthl.c)
add_test(Test-xthl test_xthl)
add_executable(test_sphl tests/test_sphl.c)
add_test(Test-sphl test_sphl)
add_executable(test_pchl tests/test_pchl.c)
add_test(Test-pchl test_pchl)
add_executable(test_call tests/test_call.c)
add_test(Test-call test_call)
add_executable(test_ret tests/test_ret.c)
add_test(Test-ret test_ret)
add_executable(test_interrupts tests/test_interrupts.c)
add_test(Test-interrupts test_interrupts)
add_executable(test_io tests/test_io.c)
add_test(Test-io test_io)
add_executable(test_stc tests/test_stc.c)
add_test(Test-stc test_stc)
add_executable(test_cmc tests/test_cmc.c)
add_test(Test-cmc test_cmc)
add_executable(test_inr tests/test_inr.c)
add_test(Test-inr test_inr)
add_executable(test_dcr tests/test_dcr.c)
add_test(Test-dcr test_dcr)
add_executable(test_cma tests/test_cma.c)
add_test(Test-cma test_cma)
add_executable(test_daa tests/test_daa.c)
add_test(Test-daa test_daa)
add_executable(test_mov tests/test_mov.c)
add_test(Test-mov test_mov)
add_executable(test_stax tests/test_stax.c)
add_test(Test-stax test_stax)
add_executable(test_ldax tests/test_ldax.c)
add_test(Test-ldax test_ldax)
add_executable(test_add tests/test_add.c)
add_test(Test-add test_add)
add_executable(test_adc tests/test_adc.c)
add_test(Test-adc test_adc)
add_executable(test_sub tests/test_sub.c)
add_test(Test-sub test_sub)
add_executable(test_sbb tests/test_sbb.c)
add_test(Test-sbb test_sbb)
add_executable(test_xra tests/test_xra.c)
add_test(Test-xra test_xra)
add_executable(test_ora tests/test_ora.c)
add_test(Test-ora test_ora)
add_executable(test_cmp tests/test_cmp.c)
add_test(Test-cmp test_cmp)
add_executable(test_rlc tests/test_rlc.c)
add_test(Test-rlc test_rlc)
add_executable(test_rrc tests/test_rrc.c)
add_test(Test-rrc test_rrc)
add_executable(test_ral tests/test_ral.c)
add_test(Test-ral test_ral)
add_executable(test_rar tests/test_rar.c)
add_test(Test-rar test_rar)
add_executable(test_lxi tests/test_lxi.c)
add_test(Test-lxi test_lxi)
add_executable(test_xri tests/test_xri.c)
add_test(Test-xri test_xri)
add_executable(test_ori tests/test_ori.c)
add_test(Test-ori test_ori)
add_executable(test_cpi tests/test_cpi.c)
add_test(Test-cpi test_cpi)
add_executable(test_lhld tests/test_lhld.c)
add_test(Test-lhld test_lhld)

