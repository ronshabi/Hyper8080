cmake_minimum_required(VERSION 3.1)
project(intel8080 C)

set(CMAKE_C_STANDARD 99)
set(CMAKE_C_FLAGS "-O3")
find_package(SDL2 REQUIRED)
include_directories(${SDL2_INCLUDE_DIRS})

add_executable(intel8080 src/main.c src/cpu.c src/cpu.h src/instructions.c src/instructions.h src/debug.c src/debug.h src/render.c src/render.h src/sys.c src/sys.h src/defs.h)
target_link_libraries(intel8080 ${SDL2_LIBRARIES})
target_link_libraries(intel8080 m)

# Testing
enable_testing()
# Generated by the create_new_test.py script
add_executable(test_inx tests/test_inx.c)
add_test(Test-inx test_inx)
add_executable(test_dcx tests/test_dcx.c)
add_test(Test-dcx test_dcx)
add_executable(test_dcr tests/test_dcr.c)
add_test(Test-dcr test_dcr)
add_executable(test_rlc tests/test_rlc.c)
add_test(Test-rlc test_rlc)
add_executable(test_rrc tests/test_rrc.c)
add_test(Test-rrc test_rrc)
add_executable(test_ral tests/test_ral.c)
add_test(Test-ral test_ral)
add_executable(test_rar tests/test_rar.c)
add_test(Test-rar test_rar)
